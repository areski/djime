{% extends "site_base.html" %}

{% load i18n %}

{% block head_title %}{% trans "Welcome to Djime tracker." %}{% endblock %}

{% block content %}
<div id="block-tables" class="block">
  <h2 class="title">{% trans "Your tasks" %}</h2>
  {% include "tracker/slip_list.html" %}
</div>
{% endblock %}

{% block sidebar %}

  {% if slip_add_form %}
    <div class="block">
      <h3>{% trans "Create a new task" %}</h3>
      <div class="inner">
      <form class="form" method="post" action="{% url slip_create %}">
        {{ form.errors }}
        <ul class="form-items">
          <div class="group">
            {{ slip_add_form.name.errors }}
            <label for="id_name">Name:</label>
            {{ slip_add_form.name }}
          </div>
          <div class="group">
            {{ slip_add_form.project.errors }}
            <label for="id_project">Project:</label>
            {{ slip_add_form.project }}
          </div>
          <div class="group">
            {{ slip_add_form.client.errors }}
            <label for="id_client">Client:</label>
            {{ slip_add_form.client }}
          </div>
          <input type="submit" value="Add a new task" />
        </ul>
      </form>
      </div>
    </div>
  {% endif %}

{% endblock %}

{% block closure %}
  <script type="text/javascript" src="{{ STATIC_URL }}js/djime.js"></script>
  <script type="text/javascript" src="{{ DEMO_STATIC_URL }}/js/jquery.autocomplete.js"></script>
  <script type="text/javascript">
  djime.autocomplete_projectnames = new Array()
  {% for project in project_js_list %}
    djime.autocomplete_projectnames[{{ forloop.counter0 }}] = new Array("{{ project }}", "{{ project.client.id }}");
  {% endfor %}
  </script>
  <script type="text/javascript">
  djime.client_list = {{ client_list|safe }}
  </script>
{% endblock %}